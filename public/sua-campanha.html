<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Doa Vita</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
        <nav  class="logo">
            <a href="index.html">
              <img src="fotos/logo.jpg" alt="logo" />
            </a>  
          </nav>
       <nav>
          <ul>
            <li><a href="index.html">PAGINA INICIAL</a></li>
            <li><a href="campanhas.html">CAMPANHAS</a></li>
          </ul>
      </nav>
        <div class="dropdown" id="user-menu">
        <button class="btn-campanha">SUA CAMPANHA</button>
          <div class="btn-drop">
            <a href="Login.html">Login</a>
            <a href="cadastrar.html">Cadastrar</a>
          </div>
      </div>  
    </header>
   <div class="container">
    <aside class="sidebar">
      <p><strong>Nome</strong></p>
      <p>Email</p>
      <p>Telefone</p>
    </aside>

    <main class="conteudo">
      <h2>Suas campanhas ativas</h2>
     

      <button class="btn-cadastrar-uma-campanha">Cadastrar uma campanha</button>
    </main>
  </div>
  <script>
  async function checkLogin() {
    try {
      const res = await fetch('/usuario-logado');
      const data = await res.json();

      const dropdown = document.getElementById('user-menu');
      const btn = dropdown.querySelector('.btn-campanha');
      const menu = dropdown.querySelector('.btn-drop');

      if (data.loggedIn) {
        btn.textContent = 'Minhas campanhas';
        menu.innerHTML = `
          <a href="sua-campanha.html">Minhas campanhas</a>
          <a href="#" id="logout-link">Sair</a>
        `;

        document.getElementById('logout-link').addEventListener('click', async (e) => {
          e.preventDefault();
          await fetch('/logout', { method: 'POST' });
          window.location.href = '/Login.html';
        });
      } else {
        btn.textContent = 'Sua campanha';
        menu.innerHTML = `
          <a href="Login.html">Login</a>
          <a href="cadastrar.html">Cadastrar</a>
        `;
      }
    } catch (err) {
      console.error('Erro ao verificar login:', err);
    }
  }

  checkLogin();

  // Ativa link de menu como "ativo" (útil para destacar a página atual)
  const links = document.querySelectorAll('header nav ul li a');
  const currentPage = window.location.pathname.split('/').pop();
  links.forEach(link => {
    if (link.getAttribute('href') === currentPage) {
      link.classList.add('active');
    }
  });

  // Redireciona ao clicar no botão "Cadastrar uma campanha"
  const cadastrarBtn = document.querySelector('.btn-cadastrar-uma-campanha');
  if (cadastrarBtn) {
    cadastrarBtn.addEventListener('click', () => {
      window.location.href = 'cadastrar-campanha.html';
    });
  }
</script>


    
</body>
</html>